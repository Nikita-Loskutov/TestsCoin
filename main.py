import asyncio
from aiogram import Bot, Dispatcher, types
from aiogram.types import InlineKeyboardButton, InlineKeyboardMarkup, WebAppInfo
from aiogram.filters import Command
from aiogram import F

TOKEN = '7930529716:AAF5TYEKKTsG_jUD3k0gtzIa3YvAfikUIdk'

# –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –±–æ—Ç–∞
bot = Bot(token=TOKEN)
# –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
dp = Dispatcher()


# –°—Ç–∞—Ä—Ç–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞
@dp.message(Command("start"))
async def start(message: types.Message):
    username = message.from_user.username or message.from_user.first_name or "User"
    web_app_url = f"https://mmm-coin.web.app/"  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ URL –≤–∞—à–µ–≥–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

    keyboard = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(text='–ò–≥—Ä–∞—Ç—å –≤ 1 –∫–ª–∏–∫ üéÆ', web_app=WebAppInfo(url=web_app_url))],
        [InlineKeyboardButton(text='–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª üì¢', url='https://t.me/your_channel')],
        [InlineKeyboardButton(text='–ö–∞–∫ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –∏–≥—Ä–µ üí∞', callback_data='how_to_earn')]
    ])

    await message.answer(
        "–ü—Ä–∏–≤–µ—Ç! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ MMM Coin üéÆ!\n"
        "–û—Ç–Ω—ã–Ω–µ —Ç—ã ‚Äî –¥–∏—Ä–µ–∫—Ç–æ—Ä –∫—Ä–∏–ø—Ç–æ–±–∏—Ä–∂–∏. –ö–∞–∫–æ–π? –í—ã–±–∏—Ä–∞–π —Å–∞–º. –¢–∞–ø–∞–π –ø–æ —ç–∫—Ä–∞–Ω—É, —Å–æ–±–∏—Ä–∞–π –º–æ–Ω–µ—Ç—ã, –∫–∞—á–∞–π –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥, —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –¥–æ—Ö–æ–¥–∞. –ú—ã –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –æ—Ü–µ–Ω–∏–º —ç—Ç–æ –≤–æ –≤—Ä–µ–º—è –ª–∏—Å—Ç–∏–Ω–≥–∞ —Ç–æ–∫–µ–Ω–∞, –¥–∞—Ç—ã –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—ã —É–∑–Ω–∞–µ—à—å —Å–æ–≤—Å–µ–º —Å–∫–æ—Ä–æ. –ü—Ä–æ –¥—Ä—É–∑–µ–π –Ω–µ –∑–∞–±—ã–≤–∞–π ‚Äî –∑–æ–≤–∏ –∏—Ö –≤ –∏–≥—Ä—É –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –≤–º–µ—Å—Ç–µ –µ—â—ë –±–æ–ª—å—à–µ –º–æ–Ω–µ—Ç!",
        reply_markup=keyboard
    )


# –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–æ–∫
@dp.callback_query(F.data.in_({'how_to_earn'}))
async def button_handler(callback_query: types.CallbackQuery):
    if callback_query.data == 'how_to_earn':
        await bot.send_message(callback_query.from_user.id, "–ß—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å, –ø—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π –±–æ–Ω—É—Å—ã!")
    await callback_query.answer()


# –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
async def main():
    await bot.delete_webhook(drop_pending_updates=True)
    await dp.start_polling(bot)


if __name__ == '__main__':
    asyncio.run(main())



